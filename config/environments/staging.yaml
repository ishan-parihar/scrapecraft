apiVersion: v1
kind: ConfigMap
metadata:
  name: scrapecraft-config
  namespace: scrapecraft-staging
  labels:
    app: scrapecraft
    component: config
    environment: staging
data:
  # Environment Configuration
  NODE_ENV: "staging"
  LOG_LEVEL: "INFO"
  
  # Backend Configuration
  BACKEND_HOST: "0.0.0.0"
  BACKEND_PORT: "8000"
  BACKEND_WORKERS: "2"
  RELOAD: "false"
  
  # Frontend Configuration
  REACT_APP_API_URL: "https://api-staging.scrapecraft.com"
  REACT_APP_WS_URL: "wss://api-staging.scrapecraft.com"
  REACT_APP_ENVIRONMENT: "staging"
  
  # Database Configuration (Staging)
  DATABASE_URL: "postgresql://scrapecraft:${DATABASE_PASSWORD}@postgres-staging:5432/scrapecraft_staging"
  DATABASE_POOL_SIZE: "10"
  DATABASE_MAX_OVERFLOW: "20"
  
  # Redis Configuration (Staging)
  REDIS_URL: "redis://redis-staging:6379/0"
  REDIS_POOL_SIZE: "10"
  
  # Security Configuration (Staging)
  SECRET_KEY: "${STAGING_SECRET_KEY}"
  ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "480"
  CORS_ORIGINS: "https://staging.scrapecraft.com,https://api-staging.scrapecraft.com"
  
  # Monitoring Configuration (Staging)
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  HEALTH_CHECK_INTERVAL: "30"
  SENTRY_DSN: "${STAGING_SENTRY_DSN}"
  
  # Feature Flags (Staging)
  ENABLE_DEBUG_MODE: "false"
  ENABLE_SQL_DEBUG: "false"
  ENABLE_CORS_DEBUG: "false"
  ENABLE_WEBSOCKET_DEBUG: "false"
  
  # External Services (Staging)
  MOCK_EXTERNAL_APIS: "false"
  ENABLE_RATE_LIMITING: "true"
  RATE_LIMIT_REQUESTS: "1000"
  RATE_LIMIT_WINDOW: "3600"
  ENABLE_REQUEST_LOGGING: "true"
  
  # Resource Limits (Staging)
  MAX_MEMORY_USAGE: "2Gi"
  MAX_CPU_USAGE: "1000m"
  
  # Performance Configuration
  ENABLE_CACHE: "true"
  CACHE_TTL: "300"
  ENABLE_COMPRESSION: "true"
  
  # SSL/TLS Configuration
  FORCE_HTTPS: "true"
  SSL_VERIFY: "true"
  
  # External Service URLs
  WHOIS_SERVICE_URL: "https://api.whoisjson.com/v1"
  IP_API_URL: "https://ipapi.co"
  SHODAN_API_KEY: "${STAGING_SHODAN_API_KEY}"
  VIRUSTOTAL_API_KEY: "${STAGING_VIRUSTOTAL_API_KEY}"